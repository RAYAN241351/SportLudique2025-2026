# üß± Documentation BIND9 ‚Äì Serveur DNS

## Introduction √† BIND9

**BIND (Berkeley Internet Name Domain)** est le serveur DNS le plus r√©pandu dans le monde Linux/Unix.
La version actuelle, **BIND9**, g√®re :

- La r√©solution DNS (nom ‚Üî IP)

- Les zones primaires et secondaires

- Le transfert de zones

- Les requ√™tes r√©cursives

- Les enregistrements DNS (A, AAAA, CNAME, MX, etc.)

Cette configuration met en place deux **vues DNS distinctes** pour le domaine `bourges.sportludique.fr`.  
Elle permet de **distinguer les r√©ponses internes et externes**, renfor√ßant la s√©curit√© et la flexibilit√© du r√©seau.

## Commandes Utiles:
```dig : dig [nom_domaine] [type_enregistrement, IPV4] ```
```nslookup [nom_domaine] [serveur_DNS] ```


| Zone | Serveur | Role | Adresse IP |
|-----------|-----------|-----------|-----------|
|LAN        |Unbound|R√©solveur Interne|192.168.110.80|
|DMZ        |Bind9      |DNS PUBLIC (Autorit√©)|192.168.18.70|
|Firewall   |PAT UDP:TCP 53|Redirection DNS vers DMZ|192.168.18.1|
|Internet   |Clients externes|Acc√®s au DNS public|           

## Installation
**Sous debian/Ubuntu**
```sudo apt update```
```sudo apt install bind9 bind9-utils bind9-doc```

## Arborescence
| Fichier / Dossier | Role |
|-----------|--------------|
| /etc/bind/named.conf | Fichier principal de configuration|
| /etc/bind/named.conf.options | Options globales (forwarders, r√©cursivit√©‚Ä¶) |
| /etc/bind/named.conf.local  |D√©finition des zones locales|
| /etc/bind/db.interne   | Fichier de zone interne |       
| /etc/bind/db.externe   | Fichier de zone externe |


## Fichier de configuration principal
**Chemin** :```/etc/bin/named.conf.options```
```
acl "reseaux_lan" {
    172.28.128.0/24;
    172.28.129.0/24;
    172.28.159.0/25;
    192.168.18.0/24;
};

options {
    directory "/var/cache/bind";

    // forwarders {
    //      183.44.18.1;
    // };

    dnssec-validation no;
    recursion no;

    allow-query { localhost; reseaux_lan; };
    listen-on { any; };
    listen-on port 53 {183.44.18.1;};
    listen-on-v6 { any; };
};
```

## Configuration d'une zone DNS
**D√©claration des zone n√©cessaires**
**Chemin** :```/etc/bind/named.conf.local```
```
//
// Do any local configuration here
//

// Consider adding the 1918 zones here, if they are not used in your
// organization
//include "/etc/bind/zones.rfc1918";


view "interne" {
    match-clients { reseaux_lan; };

    recursion no;

    zone "bourges.sportludique.fr" {
        type master;
        file "/etc/bind/db.interne";
    };

};







view "externe" {
    match-clients {
        any;
    };

    recursion no;

    zone "bourges.sportludique.fr" {
        type master;
        file "/etc/bind/db.externe";
        allow-query { any; };
        allow-transfer { none; };
    };
};
```
## Cr√©er le fichier de zone **db.interne** et **db.externe**
**Chemin** : ```/etc/bind/db.interne``` et ```/etc/bind/db.externe```
**Fichier** : ``db.interne``
```
$TTL 86400
@   IN SOA ns1.bourges.sportludique.fr. admin.bourges.sportludique.fr. (
       2025101309 ; Serial
       3600       ; Refresh
       1800       ; Retry
       1209600    ; Expire
       86400     ; Negative Cache TTL
)
@   IN NS ns1.bourges.sportludique.fr.

ns1 IN A 172.28.128.10
@   IN A 172.28.128.10
```
**Fichier** : ``db.externe``
```
$TTL 86400
@   IN SOA ns1.bourges.sportludique.fr. admin.bourges.sportludique.fr. (
        2025101308 ; Serial
        3600
        1800
        1209600
        86400 )

ns1 IN A 183.44.18.1
@   IN NS ns1.bourges.sportludique.fr.

@       IN A 183.44.18.1
www     IN A 183.44.18.1
bourges IN A 183.44.18.1
```
## Modifier le fichier **Hosts**
**Chemin :** ```/etc/hosts```
```
127.0.0.1 bourges
192.168.110.70  BIND9

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
```
## Modifier le **resolv.conf** pour mettre le DNS du Professeur 
**Chemin :** ```/etc/resolv.conf```
```
# Generated by dhcpcd
# /etc/resolv.conf.head can replace this line
# /etc/resolv.conf.tail can replace this line
nameserver 121.183.90.205
```

## V√©rification de la configuration
- sudo named-checkconf
- sudo systemctl restart bind9
- sudo named-checkzone  ```/etc/bind/db.interne``` et ```/etc/bind/db.externe```

## Configuration du PAT sur le ROUTEUR UDP ET TCP 53 

## Configuration du PAT sur le Firewall 

DEMAIN 14/10/2025 (AMINE)













     






